C51 COMPILER V9.02   LCD4BIT                                                               02/27/2017 17:39:54 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE LCD4BIT
OBJECT MODULE PLACED IN ..\bin\lcd4bit.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\drv\offchip_drivers\src\lcd4bit.c BROWSE INCDIR(..\drv\offchip_drivers\i
                    -nclude;..\drv\onchip_drivers\include;..\app\include;..\drv) DEBUG OBJECTEXTEND PRINT(.\lcd4bit.lst) OBJECT(..\bin\lcd4bi
                    -t.obj)

line level    source

   1          
   2          
   3          #include<reg52.h>
   4          
   5          #define LCD_Port P1
   6          #define High 1
   7          #define Low 0
   8          
   9          
  10          sbit RS = P1^0;
  11          sbit En = P1^1;
  12          sbit D0 = P1^4;
  13          sbit D1 = P1^5;
  14          sbit D2 = P1^6;
  15          sbit D3 = P1^7;
  16          
  17          void delay_lcd (void)
  18          {
  19   1              int del1,del2;
  20   1              for(del1=0;del1<10;del1++)
  21   1              {
  22   2              for(del2=0;del2<200;del2++);
  23   2              }
  24   1      }
  25          
  26          
  27          void write_nibble_lcd(unsigned char Val)
  28          {
  29   1              En = High;
  30   1              D0 = D1 = D2 = D3 = 0;
  31   1              if(Val & 0x01)
  32   1                      D0 = 1;
  33   1              if(Val & 0x02)
  34   1                      D1 = 1;
  35   1              if(Val & 0x04)
  36   1                      D2 = 1;
  37   1              if(Val & 0x08)
  38   1                      D3 = 1;
  39   1              En = Low;
  40   1      }
  41          
  42          
  43          void write_lcd(unsigned char Val)
  44          {
  45   1              write_nibble_lcd(Val >> 4);
  46   1              write_nibble_lcd(Val);
  47   1              delay_lcd();
  48   1      }
  49          
  50          
  51          
  52          void lcd_clear(void)
  53          {
C51 COMPILER V9.02   LCD4BIT                                                               02/27/2017 17:39:54 PAGE 2   

  54   1      RS = Low;
  55   1      write_lcd(0x01);
  56   1      write_lcd(0x01);
  57   1      delay_lcd();delay_lcd();
  58   1      
  59   1      }
  60          
  61          
  62          
  63          void init_lcd(void)
  64          {
  65   1        RS = Low;
  66   1      //  write_nibble_lcd(0x03);     delay_lcd();
  67   1      //  write_nibble_lcd(0x03);     delay_lcd();
  68   1        write_lcd(0x02);
  69   1        write_lcd(0x28);
  70   1        write_lcd(0x06);
  71   1        write_lcd(0x0c);
  72   1        write_lcd(0x80);
  73   1        write_lcd(0x01);
  74   1       
  75   1      } 
  76          
  77           
  78          void lcd_20x4Position(unsigned char row,unsigned char col)
  79          {
  80   1              RS = Low;
  81   1              if (row == 1)
  82   1                      write_lcd(0x80+col);
  83   1              else if (row == 2)
  84   1                      write_lcd(0xC0+col);
  85   1              else if (row == 3)
  86   1                      write_lcd(0x94+col);
  87   1              else if (row == 4)
  88   1                      write_lcd(0xD4+col);
  89   1              else
  90   1                      write_lcd(0x80);
  91   1      }
  92          void gotoxy_lcd(unsigned char col,unsigned char line)
  93          {
  94   1              RS = Low;
  95   1              if (line == 1)
  96   1                      write_lcd(0x7f+col);
  97   1              if (line == 2)
  98   1                      write_lcd(0xbf+col);
  99   1      }
 100          
 101          
 102          
 103          void putc_lcd(unsigned char byte)
 104          {
 105   1         RS = High;
 106   1         write_lcd(byte);
 107   1      }
 108          
 109          void print_lcd(char String[])
 110          {
 111   1              int i = 0;
 112   1              do
 113   1              {
 114   2                      putc_lcd(String[i]);
 115   2                      
C51 COMPILER V9.02   LCD4BIT                                                               02/27/2017 17:39:54 PAGE 3   

 116   2              i++;
 117   2              }
 118   1              while(String[i] != '\0');
 119   1      }
 120          
 121          
 122          
 123          void print_num_lcd(int num)
 124          {
 125   1              putc_lcd(((num/100) + 0x30));
 126   1              num %=100;
 127   1              putc_lcd(((num/10) + 0x30));
 128   1              putc_lcd(((num%10) + 0x30));
 129   1      }
 130          
 131          
 132          
 133          
 134          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    326    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
