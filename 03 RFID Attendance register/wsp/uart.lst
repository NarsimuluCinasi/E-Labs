C51 COMPILER V9.02   UART                                                                  02/25/2017 00:16:31 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE UART
OBJECT MODULE PLACED IN ..\bin\uart.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\drv\onchip_drivers\src\uart.c BROWSE INCDIR(..\drv\offchip_drivers\inclu
                    -de;..\drv\onchip_drivers\include;..\app\include;..\drv) DEBUG OBJECTEXTEND PRINT(.\uart.lst) OBJECT(..\bin\uart.obj)

line level    source

   1          
   2          #include<reg52.h>
   3          #include <uart.h>
   4          
   5          char uart_rxbuffer[50];
   6          char uart_rxbufferold[50];
   7          void init_UART(void)
   8          {
   9   1              TMOD=0x20; // Timer 1 8 bit auto reload mode
  10   1              TH1=0xFD; // Baud rate 9600
  11   1              SCON=0x50;
  12   1              TR1=1;
  13   1              
  14   1      }
  15          
  16          void transmit_UARTDataByte(char tx_char)
  17          { 
  18   1                      SBUF    =       tx_char;
  19   1                      while(TI==0);
  20   1                      TI=0;
  21   1      }
  22          
  23          void transmit_UARTDataString(char *data_string)
  24          {
  25   1              
  26   1                      while(*data_string != '\0')
  27   1                      {
  28   2                              transmit_UARTDataByte(*data_string);    
  29   2                              data_string++;
  30   2                      }
  31   1                      
  32   1                      transmit_UARTDataByte('\0');
  33   1                      
  34   1      }
  35          
  36          
  37          char receive_UARTDataByte(void)
  38          {
  39   1              char data_rec=0;
  40   1              
  41   1              while(RI==0);
  42   1              data_rec=SBUF;
  43   1              RI=0;
  44   1              return data_rec;
  45   1              
  46   1      }
  47          
  48          char* receive_UARTDataString(void)
  49          {
  50   1              char data_byte=0, i=0;
  51   1              do
  52   1              {
  53   2                              data_byte = receive_UARTDataByte();     
  54   2                              uart_rxbuffer[i] = data_byte;
C51 COMPILER V9.02   UART                                                                  02/25/2017 00:16:31 PAGE 2   

  55   2                              i++;
  56   2                      
  57   2              }while(data_byte != '\0');
  58   1      
  59   1              return uart_rxbuffer;   
  60   1              
  61   1      }
  62          
  63          char *UART_RxDataString(void)
  64          {
  65   1              return uart_rxbuffer;
  66   1      }
  67          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     82    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =    100    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
