C51 COMPILER V9.02   MAIN                                                                  03/01/2017 19:37:35 PAGE 1   


C51 COMPILER V9.02, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN ..\bin\main.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE ..\app\main.c BROWSE INCDIR(..\drv\offchip_drivers\include;..\drv\onchip_dr
                    -ivers\include;..\app\include;..\drv) DEBUG OBJECTEXTEND PRINT(.\main.lst) OBJECT(..\bin\main.obj)

line level    source

   1          
   2          /*Defining all Header files */
   3          
   4          #include <reg52.h>
   5          #include <lcd4bit.h>
   6          #include <delay.h>
   7          #include <adc.h>
   8          #include <uart.h>
   9          
  10          #define IN 1
  11          #define OUT 0
  12          #define OFF 0
  13          #define ON 1
  14          
  15          #define MOBILE_SMS "AT+CMGS=\"+919666333695\""
  16          
  17          sbit BUZZER = P1^0;
  18          
  19          
  20          
  21          unsigned char axisx, axisy, axisz, body_temp, heartrate;
  22          
  23          
  24          
  25          /*Program in AT89S52 will starts executes from here */
  26          
  27          
  28          
  29          
  30          void Main()
  31          {
  32   1      
  33   1              init_lcd();
  34   1              adc_0808Init();
  35   1              lcd_clear();
  36   1              
  37   1      
  38   1              gotoxy_lcd(1, 1);
  39   1              print_lcd("Elder people caring");
  40   1              gotoxy_lcd(1, 2);
  41   1              print_lcd("using sensor network");
  42   1              
  43   1              delay_sec(1);
  44   1      
  45   1                      init_UART();
  46   1              lcd_clear();
  47   1                      
  48   1              print_lcd("Initilizing GSM.....");
  49   1              transmit_UARTDataString("AT"); delay_ms(50);
  50   1              transmit_UARTDataByte(0X0D);
  51   1      
  52   1              while(receive_UARTDataByte() != 'O');
  53   1              while(receive_UARTDataByte() != 'K');
  54   1              
C51 COMPILER V9.02   MAIN                                                                  03/01/2017 19:37:35 PAGE 2   

  55   1              lcd_clear();
  56   1              print_lcd("MODEM AT OK ....");
  57   1      
  58   1              transmit_UARTDataString("ATE0");
  59   1              transmit_UARTDataByte(0X0D);
  60   1              while(receive_UARTDataByte() != 'O');
  61   1              while(receive_UARTDataByte() != 'K');
  62   1              lcd_clear();
  63   1              print_lcd("MODEM ECHO OFF....");
  64   1      
  65   1              lcd_clear();
  66   1              print_lcd("Checking GSM Network");
  67   1              delay_ms(250);
  68   1              transmit_UARTDataString("AT+CPIN?"); delay_ms(100);transmit_UARTDataByte(0X0D);
  69   1              
  70   1                      while(receive_UARTDataByte() != 'R');
  71   1                      while(receive_UARTDataByte() != 'E');
  72   1                      while(receive_UARTDataByte() != 'A');
  73   1                      while(receive_UARTDataByte() != 'D');
  74   1                      while(receive_UARTDataByte() != 'Y');
  75   1      
  76   1              lcd_clear();
  77   1                      print_lcd("MODEM CPIN OK ......");
  78   1      
  79   1                      transmit_UARTDataString("AT+CMGD=1");delay_ms(100);     transmit_UARTDataByte(0X0D);
  80   1                      while(receive_UARTDataByte() != 'O');
  81   1                      while(receive_UARTDataByte() != 'K');
  82   1      
  83   1              lcd_clear();
  84   1                      print_lcd("SMS TEXTM OK ...... ");
  85   1      
  86   1                      transmit_UARTDataString(MOBILE_SMS);  delay_ms(50);     transmit_UARTDataByte(0X0D);
  87   1                      while(receive_UARTDataByte() != '>');
  88   1                      transmit_UARTDataString("GSM MODULE TEST SMS");delay_ms(100);
  89   1                      transmit_UARTDataByte(0X1A);
  90   1                      while(receive_UARTDataByte() != 'O');
  91   1                      while(receive_UARTDataByte() != 'K');
  92   1                      print_lcd("SMS TEST OK .....");
  93   1                      delay_ms(100);
  94   1      
  95   1      lcd_clear();
  96   1              
  97   1              while(1)
  98   1              {
  99   2                      
 100   2                      
 101   2                      axisx = adc_0808GetChannelData(0);
 102   2                      axisy = adc_0808GetChannelData(1);
 103   2                      axisz = adc_0808GetChannelData(2);
 104   2                      body_temp = adc_0808GetChannelData(3);
 105   2                      heartrate = adc_0808GetChannelData(4);
 106   2                      
 107   2                      gotoxy_lcd(1, 1);
 108   2      //              print_num_lcd(axisx); delay_ms(500);
 109   2                      if(axisx>80 || axisy>80 || axisz>80)
 110   2                      {
 111   3                              
 112   3              
 113   3                               
 114   3                              lcd_clear();
 115   3                              gotoxy_lcd(1, 1);
 116   3                              print_lcd("Person Fallen");             delay_ms(500);
C51 COMPILER V9.02   MAIN                                                                  03/01/2017 19:37:35 PAGE 3   

 117   3      
 118   3                                              transmit_UARTDataString(MOBILE_SMS);  delay_ms(50);     transmit_UARTDataByte(0X0D);
 119   3                      while(receive_UARTDataByte() != '>');
 120   3                      transmit_UARTDataString("PERSON FALLEN");delay_ms(100);
 121   3                      transmit_UARTDataByte(0X1A);
 122   3                      while(receive_UARTDataByte() != 'O');
 123   3                      while(receive_UARTDataByte() != 'K'); lcd_clear(); print_lcd("SMS Sent ...");           delay_ms(500);
 124   3                              
 125   3                      }
 126   2                      else if(body_temp > 20)
 127   2                      {
 128   3                              
 129   3                      
 130   3                               
 131   3                              lcd_clear();
 132   3                              gotoxy_lcd(1, 1);
 133   3                              print_lcd("Person body");
 134   3                              gotoxy_lcd(1, 2);
 135   3                              print_lcd("Temperature Increased");
 136   3                              delay_ms(500);
 137   3      
 138   3                                              transmit_UARTDataString(MOBILE_SMS);  delay_ms(50);     transmit_UARTDataByte(0X0D);
 139   3                      while(receive_UARTDataByte() != '>');
 140   3                      transmit_UARTDataString("PERSON BODY Temperature increased");delay_ms(100);
 141   3                      transmit_UARTDataByte(0X1A);
 142   3                      while(receive_UARTDataByte() != 'O');
 143   3                      while(receive_UARTDataByte() != 'K'); lcd_clear(); print_lcd("SMS Sent ...");           delay_ms(500);
 144   3                              
 145   3                      }
 146   2                      else if(heartrate > 80)
 147   2                      {
 148   3                              lcd_clear();
 149   3                              gotoxy_lcd(1, 1);
 150   3                              print_lcd("Person Heart rate");
 151   3                              gotoxy_lcd(1, 2);
 152   3                              print_lcd(" Increased");
 153   3                              delay_ms(500);
 154   3      
 155   3                                              transmit_UARTDataString(MOBILE_SMS);  delay_ms(50);     transmit_UARTDataByte(0X0D);
 156   3                      while(receive_UARTDataByte() != '>');
 157   3                      transmit_UARTDataString("Person Heart Rate increased");delay_ms(100);
 158   3                      transmit_UARTDataByte(0X1A);
 159   3                      while(receive_UARTDataByte() != 'O');
 160   3                      while(receive_UARTDataByte() != 'K');           lcd_clear(); print_lcd("SMS Sent ...");         delay_ms(500);
 161   3                              
 162   3                      }
 163   2                      else
 164   2                      {
 165   3                              BUZZER = OFF;
 166   3                              
 167   3                              gotoxy_lcd(1, 1);
 168   3                                      lcd_clear();print_lcd("Normal .....");
 169   3                              gotoxy_lcd(1, 2);
 170   3                              delay_ms(500);
 171   3                      }
 172   2         }
 173   1      
 174   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    780    ----
C51 COMPILER V9.02   MAIN                                                                  03/01/2017 19:37:35 PAGE 4   

   CONSTANT SIZE    =    429    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
